<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="../css/zhenspxq.css">
    <script src="../js/spxq.js"></script>
    <!-- <script src="../js/index.js"></script> -->
    <title>Document</title>
    <style>
        img {
            display: block;
            border: none;
        }
        
        #zoomBox {
            position: relative;
            width: 300px;
            height: 300px;
            border: 1px solid #cecece;
        }
        
        #midArea {
            width: 300px;
            height: 300px;
            border: 1px solid #cecece;
        }
        
        #zoom {
            display: none;
            position: absolute;
            width: 100px;
            height: 80px;
            background-color: white;
            border: 2px solid #777;
            opacity: 0.3;
            cursor: move;
        }
        
        #midArea img {
            width: 300px;
            height: 300px;
            position: absolute;
        }
        
        #bigArea {
            display: none;
            position: absolute;
            left: 500px;
            top: 100px;
            width: 400px;
            height: 400px;
            overflow: hidden;
            border: 1px solid #cecece;
            z-index: 1001
        }
        
        #bigArea img {
            position: absolute;
            width: 600px;
            height: 600px;
        }
    </style>
</head>

<body>
    <hr>
    <div class="nav">
        <div id="zoomBox">
            <div id="midArea">
                <img src="../img/20f5742c908acc6bac33c4a9076bdb28.jpg">
                <div id="zoom"></div>
            </div>
            <div id="bigArea">
                <img src="../img/20f5742c908acc6bac33c4a9076bdb28.jpg">
            </div>
        </div>
        <p><span>产品编号：153435</span>
            <span>&nbsp;&nbsp;&nbsp;&nbsp; 分享</span>
            <span>&nbsp;&nbsp;&nbsp;&nbsp; 收藏商品</span>
        </p>
        <div class="nav-right">
            <h1>伯纳天纯 经典系列 幼猫粮 1.5kg</h1>
            <h2>增强免疫力 母乳配方 防治腹泻 </h2>
            <div class="djs">
                <span>此商品参与“折扣”活动</span>
                <div id="Time"></div>
            </div>
            <div class="jg">
                <span>活动价：</span>
                <span>￥</span>
                <span class="p-price" data-id="aaa">75.00</span>
                <span>￥128.00</span>
            </div>
            <div id="yx">
                <h1>
                    <span>月销：<em>2722</em>袋&nbsp;&nbsp;&nbsp;&nbsp;</span>
                    <span>评价：<em>(4277)</em>&nbsp;&nbsp;&nbsp;&nbsp;</span>
                    <span>咨询：<em>(61)</em>&nbsp;&nbsp;</span>
                    <span>赠送：最多<i>12</i>E宠币</span>
                </h1>
                <h2>
                    <span><img src="../img/qualityassurance.png" alt=""><em>正品保证&nbsp;&nbsp;|</em></span>
                    <span><img src="../img/qualityassurance.png" alt=""><em>99元包邮&nbsp;&nbsp;|<em></span>
                    <span><img src="../img/qualityassurance.png" alt=""><em>30天退货<em></span>
                </h2>
            </div>
            <div class="gg">
                <h3>
                    <span>规格：
                    <a href=""><em>1.5kg<img src="../img/goods-select.png" alt=""></em></a>
                    <a href=""><em>10kg</em></a>
                    </span>
                </h3>
                <h4>
                    <span>我要买：                        
                        <button class="decrement">-</button>
                        <input type="text" value="1" class="itxt">
                        <button class="increment">+</button>袋  
                    </span>
                </h4>
                <h5>
                    <span>送货至：<i>郑州 高新区</i></span>
                </h5>
            </div>
            <div class="xd">
                <span>16点前下单，当天发货。</span>
                <span>运费详情>></span>
            </div>
            <button id="btn">加入购物车</button>
        </div>
    </div>
    <div id="tzjm">
        <img src="../img/buy_dog.gif" alt="">
        <div class="tzjm-right">
            <h1>
                恭喜小主,成功添加到购物车咯~
            </h1>
            <h2>
                购物车共有<span>1</span>件商品，合计：<span class="ft18">256.00元</span>
            </h2>
            <a href=""><button id="btn2">继续购物</button></a>
            <a href="../html/productList.html"><button>立即结算</button></a>
        </div>
    </div>

    <script>
        function $(id) {
            return document.getElementById(id);
        }

        function Zoom() {
            this.zoomBox = $("zoomBox");
            this.midArea = $("midArea");
            this.midImg = this.midArea.children[0];
            this.zoom = $("zoom");
            this.bigArea = $("bigArea");
            this.bigImg = this.bigArea.children[0];
        }
        Zoom.prototype.start = function() {
            this.midArea.onmouseover = () => {
                this.zoom.style.display = "block";
                this.bigArea.style.display = "block";
            }
            this.midArea.onmouseout = () => {
                this.zoom.style.display = "none";
                this.bigArea.style.display = "none";
            }
            this.midArea.onmousemove = (e) => {
                let evt = e || event;
                /* let x = evt.offsetX;
                let y = evt.offsetY; */
                let x = evt.pageX - this.zoomBox.offsetLeft;
                let y = evt.pageY - this.zoomBox.offsetTop;
                let l = x - this.zoom.offsetWidth / 2;
                let t = y - this.zoom.offsetHeight / 2;
                let mw = this.zoomBox.offsetWidth - this.zoom.offsetWidth;
                let mh = this.zoomBox.offsetHeight - this.zoom.offsetHeight;
                l = l <= 0 ? 0 : l >= mw ? mw : l;
                t = t <= 0 ? 0 : t >= mh ? mh : t;
                this.zoom.style.left = l + "px";
                this.zoom.style.top = t + "px";
                this.bigImg.style.left = -this.zoom.offsetLeft * this.bigImg.offsetWidth / this.midImg.offsetWidth + "px";
                this.bigImg.style.top = -this.zoom.offsetTop * this.bigImg.offsetHeight / this.midImg.offsetHeight + "px";
            }
        }
        let zoom = new Zoom();
        zoom.start();







        function time(date) {
            var nowDate = new Date();
            var ss = Math.floor((date - nowDate) / 1000);
            var h = Math.floor(ss / 3600);
            var m = Math.floor(ss / 60 % 60);
            var s = Math.floor(ss % 60);

            function format(num) {
                return num < 10 ? "0" + num : num;
            }
            h = format(h);
            m = format(m);
            s = format(s);
            Time.innerText = "距结束只剩两天" + h + ":" + m + ":" + s;
            if (ss <= 0) {
                clearInterval(timer);
                box.innerText = "秒杀结束";
            }
        }
        var oDate = new Date("2020/11/13 12:00:00");
        time(oDate);
        var timer = setInterval(function() {
            time(oDate);
        }, 1000)

        var btn = document.getElementById("btn");
        var btn2 = document.getElementById("btn2");
        var tzjm = document.getElementById("tzjm")
        btn.onclick = function() {
            tzjm.style.display = "block"
        }
        btn2.onclick = function() {
            tzjm.style.display = "none"
        }

        $(function() {
                $(".increment").click(function() {
                    $(this).css({
                        "background": "red"
                    })
                })
            })
            // var increment = document.querySelector(".increment");
            // var decrement = document.querySelector(".decrement");
            // var itxt = document.querySelector(".itxt");
            // let num = 0;
            // increment.onclick = () => {
            //     num++;
            //     itxt.innerText = `${num}`
            // }
    </script>
    <script>
        // $(function() {
        window.onload = function() {
            console.log($(".increment"))
            $(".increment").click(function() {
                // alert("www")
                let n = $(this).siblings(".itxt").val();
                console.log(n)
                n++;
                $(this).siblings(".itxt").val(n);



                $(".increment").click(function() {
                    var f2 = $(this).attr('data-id', "75")
                    console.log(f2)
                })
            })



            $(".decrement").click(function() {
                // alert("www")
                let n = $(this).siblings(".itxt").val();
                if (n == 1) {
                    return false;
                }
                console.log(n)
                n--;
                $(this).siblings(".itxt").val(n);
            })

        }
    </script>
    <script src="../dist/js/jquery-1.11.0.js"></script>

</body>

</html>